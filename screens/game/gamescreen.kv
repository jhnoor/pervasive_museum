#:import config config

<GameScreen>
    canvas.before:
        Color:
            rgba: root.background_color
        Rectangle:
            pos: self.pos
            size: self.size

<TimeProgressBar>
    max: root.max
    value: root.value
    pos_hint: {'center_x': 0.5, 'center_y': 0.5}

    # Can't get two custom progressbars on same kv page apparently?
    #canvas:
    #    Color:
    #        rgb: 1, 1, 1
    #    BorderImage:
    #        border: (12, 12, 12, 12)
    #        pos: self.x, self.center_y - config.time_progressbar_height/2
    #        size: self.width, config.time_progressbar_height
    #        source: 'images/progressbar_bg.PNG'
    #    BorderImage:
    #        border: [int(min(self.width * (self.value / float(self.max)) if self.max else 0, 12))] * 4
    #        pos: self.x, self.center_y - config.time_progressbar_height/2
    #        size: self.width * (self.value / float(self.max)) if self.max else 0, config.time_progressbar_height
    #        source: 'images/time_progressbar_foreground.PNG'


<PlayerXpProgressBar>
    max: 100
    value: root.progress
    size_hint: (1, None)
    pos_hint: {"center_x": 0.5, "center_y": 0.7}

    canvas:
        Color:
            rgb: 1, 1, 1
        BorderImage:
            border: (12, 12, 12, 12)
            pos: self.x, self.center_y - config.xp_progressbar_height/2
            size: self.width, config.xp_progressbar_height
            source: 'images/progressbar_bg.PNG'
        BorderImage:
            border: [int(min(self.width * (self.value / float(self.max)) if self.max else 0, 12))] * 4
            pos: self.x, self.center_y - config.xp_progressbar_height/2
            size: self.width * (self.value / float(self.max)) if self.max else 0, config.xp_progressbar_height
            source: 'images/xp_progressbar_foreground.png'


<PlayersGridLayout>
    cols: 2
    size_hint: (1, 0.2)
    pos_hint: {'bottom': 1}

    canvas.before:
        Color:
            rgba: root.background_color
        Rectangle:
            pos: self.pos
            size: self.size

<PlayerLayout>
    rows: 3
    padding: 30, 10

<PowerupsGridLayout>
    cols: root.cols

<PowerupLayout>
    pos_hint: {'right': 1}

    Button:
        id: button_id
        size_hint: (.8, 1)
        pos_hint: {"right": .9, "top": 1}
        background_color: config.colors['blue']
        on_press: root.use_powerup()

        StackLayout:
            pos: self.parent.pos
            size: self.parent.size
            orientation: 'lr-tb'
            AsyncImage:
                source: root.icon_url
                size_hint_x: None
                width: 74
            Label:
                size_hint_x: None
                width: 100
                text: root.name

    Label:
        text: str(root.quantity)
        color: (0, 0, 0, 1)
        size_hint: (0.1, 0.4)
        pos_hint: {"right": .85, "top": 0.35}
        canvas.before:
            Color:
                rgba: config.colors['grey']
            Rectangle:
                pos: self.pos
                size: self.size


<QuestionGrid>
    cols: 3
    size_hint: (1, 0.5)
    pos_hint: {'top': 1}

    canvas.before:
        Color:
            rgba: root.background_color
        Rectangle:
            pos: self.pos
            size: self.size

    ImageButton:
        source: root.left_picture_url
        size_hint: (1, 1)
        pos_hint: {'left': 1}
        on_press: root.left_pressed()

    Label:
        text: root.text
        size_hint_y: None
        text_size: self.width, None
        height: self.texture_size[1]
        font_size: '%s sp' % (self.width*.07)
        pos_hint: {'top': 1}

    ImageButton:
        source: root.right_picture_url
        size_hint: (1, 1)
        pos_hint: {'right': 1}
        on_press: root.right_pressed()


<ChoiceButtonsGrid>
    cols: 2
